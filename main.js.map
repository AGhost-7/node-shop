{"version":3,"sources":["index.coffee","main.js","masks.coffee","home.coffee","products.coffee"],"names":["app","homeCtrl","productCtrl","angular","module","console","log","config","$routeProvider","when","templateUrl","controller","otherwise","redirectTo","directive","restrict","require","link","scope","el","attrs","ctrl","last","$parsers","push","input","val","match","$setViewValue","$render","$scope","greet","$routeParams","$http","i","len","name","paramNames","ref","page","manufacturers","categories","foo","$watch","search","params","length","method","url","success","data","items","purchase","item","amount","get","concat"],"mappings":"AACA,GAAAA,KAAAC,SAAAC,WAAAF,KAAAG,QAAAC,OAAA,aAAA,YAAAC,QACAC,IAAA,eADAN,IAKAO,QAAA,iBAAA,SAAAC,GCEI,MDDJA,GACAC,KAAA,SACAC,YAAA,kBACAC,WAAA,aAEAF,KAAA,YACAC,YAAA,sBACAC,WAAA,gBAEAC,WAAAC,WAAA,aAfAb,IECAc,UAAA,gBAAA,WDmBE,OClBFC,SAAA,IACAC,QAAA,UACAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,GAAAC,EDqBM,OCrBNA,GAAA,OACAD,EAAAE,SAAAC,KAAA,SAAAC,GACA,MAAAN,GAAAO,MAAAC,MAAA,+BAIAL,EAAAH,EAAAO,OAHAL,EAAAO,cAAAN,GACAD,EAAAQ,iBAKAf,UAAA,WAAA,WDuBE,OCtBFC,SAAA,IACAC,QAAA,UACAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,GACA,GAAAC,EDyBM,OCzBNA,GAAA,OACAD,EAAAE,SAAAC,KAAA,SAAAC,GACA,MAAAN,GAAAO,MAAAC,MAAA,aAIAL,EAAAH,EAAAO,OAHAL,EAAAO,cAAAN,GACAD,EAAAQ,iBFtBA5B,SGAA,SAAA6B,GFwDE,MEvDFA,GAAAC,MAAA,uBHDA/B,IGIAW,WAAA,YAAA,SAAAV,WHJAC,YIAA,SAAA4B,EAAAE,EAAAC,GACA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,CAwBA,KAxBAR,EAAAS,KAAA,OAAAD,EAAAN,EAAAO,MAAAD,EAAA,EACAR,EAAAU,iBACAV,EAAAW,cAEAX,EAAAY,KAAA,IAAA,IAAA,KACAL,GAAA,OAAA,WAAA,WAAA,eAAA,WAAA,SACAP,EAAAa,OAAA,OAAA,WH8DI,MG9DJtC,SAAAC,IAAA,kBAEAwB,EAAAc,OAAA,WACA,GAAAV,GAAAC,EAAAC,EAAAS,CAEA,KAFAxC,QAAAC,IAAA,aACAuC,KACAX,EAAA,EAAAC,EAAAE,EAAAS,OAAAX,EAAAD,EAAAA,IHgEME,EAAOC,EAAWH,GG/DxBW,EAAAT,GAAAN,EAAAM,EHkEI,OGjEJH,IAAAc,OAAA,MAAAC,IAAA,WAAAH,OAAAA,IACAI,QAAA,SAAAC,GHsEM,MGrEN7C,SAAAC,IAAA4C,GACApB,EAAAqB,MAAAD,KAGApB,EAAAc,SAEAd,EAAAsB,SAAA,SAAAC,EAAAC,GHoEI,MGnEJjD,SAAAC,IAAA+C,EAAAC,IAEApB,EAAA,EAAAC,EAAAE,EAAAS,OAAAX,EAAAD,EAAAA,IHoEIE,EAAOC,EAAWH,GGnEtBJ,EAAAa,OAAAP,EAAAN,EAAAc,OHyEE,OG/DFX,GACAsB,IAAA,yBACAN,QAAA,SAAAC,GH2DI,MG1DJpB,GAAAU,eAAA,QAAAgB,OAAAN,KAGAjB,EACAsB,IAAA,qBACAN,QAAA,SAAAC,GHwDI,MGvDJpB,GAAAW,YAAA,QAAAe,OAAAN,MJ7CAlD,IIiDAW,WAAA,eAAA,SAAA,eAAA,QAAAT","file":"main.js","sourcesContent":["\napp = angular.module('node-shop', ['ngRoute'])\nconsole.log('hello world')\n\n\napp\n.config(['$routeProvider', ($routeProvider) ->\n  $routeProvider\n    .when('/home',\n      templateUrl: '/html/home.tmpl'\n      controller: 'homeCtrl'\n    )\n    .when('/product',\n      templateUrl: '/html/products.tmpl'\n      controller: 'productCtrl'\n    )\n    .otherwise(redirectTo: '/home')\n])\n",null,"\napp\n.directive('currencyModel', ->\n  restrict: 'A'\n  require: 'ngModel'\n  link : (scope, el, attrs, ctrl) ->\n    last = undefined\n    ctrl.$parsers.push((input) ->\n      if !el.val().match(/^[0-9]*[.]{0,1}[0-9]{0,2}$/g)\n        ctrl.$setViewValue(last)\n        ctrl.$render()\n      else\n        last = el.val()\n    )\n)\n.directive('intModel', ->\n  restrict: 'A'\n  require: 'ngModel'\n  link: (scope, el, attrs, ctrl) ->\n    last = undefined\n    ctrl.$parsers.push((input) ->\n      if !el.val().match(/^[0-9]*$/g)\n        ctrl.$setViewValue(last)\n        ctrl.$render()\n      else\n        last = el.val()\n    )\n)\n","\nhomeCtrl = ($scope) ->\n    $scope.greet = 'hello from Angular!'\n\n\napp.controller('homeCtrl', ['$scope', homeCtrl])\n","\nproductCtrl = ($scope, $routeParams, $http) ->\n  $scope.page = $routeParams.page ? 1\n  $scope.manufacturers = []\n  $scope.categories = []\n\n  $scope.foo = ['a', 'b', 'c']\n  paramNames = ['page', 'minprice', 'maxprice', 'manufacturer', 'category', 'order']\n  $scope.$watch('page', -> console.log('page changed'))\n\n  $scope.search = ->\n    console.log('search...')\n    params = {}\n    for name in paramNames\n      params[name] = $scope[name]\n    $http(method: 'GET', url: '/product', params: params)\n      .success((data) ->\n        console.log(data)\n        $scope.items = data\n      )\n\n  $scope.search()\n\n  $scope.purchase = (item, amount) ->\n    console.log(item, amount)\n\n  for name in paramNames\n    $scope.$watch(name, $scope.search)\n\n  # reapply = ->\n  #   if $scope.$$phase\n  #     setTimeout(reapply, 300)\n  #   else\n  #     $scope.$apply()\n\n\n\n  $http\n    .get('/product/manufacturer')\n    .success((data) ->\n      $scope.manufacturers = [undefined].concat(data)\n    )\n\n  $http\n    .get('/product/category')\n    .success((data) ->\n      $scope.categories = [undefined].concat(data)\n    )\n\n\napp.controller('productCtrl', ['$scope', '$routeParams', '$http', productCtrl])\n"],"sourceRoot":"/source/"}